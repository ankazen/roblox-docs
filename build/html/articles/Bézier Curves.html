

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Bézier Curves &mdash; roblox-docs  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> roblox-docs
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Roblox-Docs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../about/index.html">About</a></li>
</ul>
<p class="caption"><span class="caption-text">learn-roblox</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/studio-basics.html">STUDIO 基础知识</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/creating.html">创建</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/international.html">国际化</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/sound-lighting-fx.html">声效、光照与特效</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/marketing.html">市场营销</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/optimization.html">性能优化</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/analytics.html">数据分析</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/user-interface.html">用户界面</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/monetization.html">盈利</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/coding-scripts.html">编码与脚本</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/cross-platform.html">跨平台发展</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/gameplay.html">游戏制作</a></li>
</ul>
<p class="caption"><span class="caption-text">api-reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api-reference/avatar.html">AVATAR</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">roblox-docs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Bézier Curves</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/articles/Bézier Curves.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="bezier-curves">
<h1>Bézier Curves<a class="headerlink" href="#bezier-curves" title="Permalink to this headline">¶</a></h1>
<p>Time:<em></em></p>
<p>Game development often requires using curves, such as drawing curvy shapes or travelling along a non-linear path. However, computers require a function in order to perform calculations. For lines, equations are quite simple (y = mx +b). Curves, on the other hand, tend to be a bit more complicated. A <strong>Bézier curve</strong> is an easier type of curve that is useful in a wide variety of places in game design. You’ll need to be somewhat comfortable with the following math topics in order to get started:</p>
<ul class="simple">
<li><p>Algebra</p></li>
<li><p>Linear interpolation</p></li>
<li><p>Vectors</p></li>
</ul>
<div class="section" id="quadratic-bezier-curves">
<h2>Quadratic Bézier curves<a class="headerlink" href="#quadratic-bezier-curves" title="Permalink to this headline">¶</a></h2>
<p>A <strong>quadratic Bézier curve</strong> is a curve created using <strong>three points</strong>. The first and the third point define the start and the end of the curve. The intermediate point influences the curvature of the line, and is most of the time not on the curve.<br />Here’s what one quadratic Bézier looks like:</p>
<p><img alt="bezier1.png" src="https://developer.roblox.com/assets/blt6f28a20d3417e288/Bezier1.png" /></p>
<p>This may seem confusing at first, but it’s simpler than it appears: the function is lerping along the line between between p0 and p1 while simultaneously lerping along the line between p1 and p2. We’re then taking the two points created by those two lerp functions and then lerping along that value to get our point on the curve. This looks something like this:</p>
<p><img alt="bezier2.gif" src="https://developer.roblox.com/assets/blt6bac53c6c6f16b7b/Bezier2.gif" /></p>
<p>We can write it in code form as such:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">function</span> <span class="n">lerp</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
	<span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="p">(</span><span class="n">b</span> <span class="o">-</span> <span class="n">a</span><span class="p">)</span> <span class="o">*</span> <span class="n">c</span>
<span class="n">end</span>

<span class="n">function</span> <span class="n">quadBezier</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">p0</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span>
	<span class="n">local</span> <span class="n">l1</span> <span class="o">=</span> <span class="n">lerp</span><span class="p">(</span><span class="n">p0</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
	<span class="n">local</span> <span class="n">l2</span> <span class="o">=</span> <span class="n">lerp</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
	<span class="n">local</span> <span class="n">quad</span> <span class="o">=</span> <span class="n">lerp</span><span class="p">(</span><span class="n">l1</span><span class="p">,</span> <span class="n">l2</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
	<span class="k">return</span> <span class="n">quad</span>
<span class="n">end</span>
</pre></div>
</div>
<p>This function is alright and there’s nothing wrong with it, but there’s a more formal equation that’s commonly used for quadratic Bézier curves.</p>
<p><img alt="beziereq1.png" src="https://developer.roblox.com/assets/blte9e328e234646be2/Beziereq1.png" /></p>
<p>To understand why this equation works we have to first think about how we would create a linear Bézier curve (not really a curve now is it?). If you’re up to date on the prerequisites of the article then you already know how to do this in the form of a linear interpolation between two points!</p>
<p><img alt="beziereq2.png" src="https://developer.roblox.com/assets/blt3e7f7e13dc09fbd3/Beziereq2.png" /></p>
<p>We already know how to do a quadratic Bezier using three linear interpolations like we did in the code above so let’s try writing that out with our linear B(t) function:</p>
<p><img alt="beziereq3.png" src="https://developer.roblox.com/assets/blt592536ac50554d85/Beziereq3.png" /></p>
<p>Sure enough we’re left with the formal quadratic Bézier curve equation!</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">function</span> <span class="n">quadBezier</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">p0</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span>
	<span class="k">return</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">t</span><span class="p">)</span><span class="o">^</span><span class="mi">2</span> <span class="o">*</span> <span class="n">p0</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">t</span><span class="p">)</span> <span class="o">*</span> <span class="n">t</span> <span class="o">*</span> <span class="n">p1</span> <span class="o">+</span> <span class="n">t</span><span class="o">^</span><span class="mi">2</span> <span class="o">*</span> <span class="n">p2</span>
<span class="n">end</span>
</pre></div>
</div>
<p><img alt="https://developer.roblox.com/assets/blt8a1bc7e1b6272ca7/Bezier3.gif" src="https://developer.roblox.com/assets/blt8a1bc7e1b6272ca7/Bezier3.gif" /></p>
</div>
<div class="section" id="cubic-bezier-curves">
<h2>Cubic Bézier curves<a class="headerlink" href="#cubic-bezier-curves" title="Permalink to this headline">¶</a></h2>
<p>A cubic Bézier curve is a curve that’s created with four points. The first and the fourth point define the start and the end of the curve. The intermediates point once again just like the quadratic curve influence the curvature of the line.</p>
<p>Here’s what a cubic Bézier might look like:</p>
<p><img alt="bezier4.png" src="https://developer.roblox.com/assets/blt6dbdfe4e78afd162/Bezier4.png" /></p>
<p>Once again, this might seem a little confusing to wrap your head around but it’s a very similar process to what we were doing with the quadratic Bézier curves. What we’re actually doing is lerping along the line between between p0 and p1 while simultaneously lerping along the line between p1 and p2 while also simultaneously lerping along the line between p2 and p3. We’re then taking the two points created by those the first and second lerp functions and then lerping along that value to get yet another point which we’ll call “a”. Then we’re taking two points created by the second and third lerp functions and lerping along the line created by those two points to get a point which we’ll call “b”. Finally, we lerp between “a” and “b” to get our point along the curve.</p>
<p><img alt="bezier5.gif" src="https://developer.roblox.com/assets/blt0e3d6247bf78730f/Bezier5.gif" /></p>
<p>We can write this in function form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">function</span> <span class="n">lerp</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
	<span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="p">(</span><span class="n">b</span> <span class="o">-</span> <span class="n">a</span><span class="p">)</span> <span class="o">*</span> <span class="n">c</span>
<span class="n">end</span>

<span class="n">function</span> <span class="n">cubicBezier</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">p0</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">p3</span><span class="p">)</span>
	<span class="n">local</span> <span class="n">l1</span> <span class="o">=</span> <span class="n">lerp</span><span class="p">(</span><span class="n">p0</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
	<span class="n">local</span> <span class="n">l2</span> <span class="o">=</span> <span class="n">lerp</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
	<span class="n">local</span> <span class="n">l3</span> <span class="o">=</span> <span class="n">lerp</span><span class="p">(</span><span class="n">p2</span><span class="p">,</span> <span class="n">p3</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
	<span class="n">local</span> <span class="n">a</span> <span class="o">=</span> <span class="n">lerp</span><span class="p">(</span><span class="n">l1</span><span class="p">,</span> <span class="n">l2</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
	<span class="n">local</span> <span class="n">b</span> <span class="o">=</span> <span class="n">lerp</span><span class="p">(</span><span class="n">l2</span><span class="p">,</span> <span class="n">l3</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
	<span class="n">local</span> <span class="n">cubic</span> <span class="o">=</span> <span class="n">lerp</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
	<span class="k">return</span> <span class="n">cubic</span>
<span class="n">end</span>
</pre></div>
</div>
<p>Yet again, there’s a more formal equation for a cubic Bézier:</p>
<p><img alt="beziereq4.png" src="https://developer.roblox.com/assets/blt8edacc997ebcbbc2/Beziereq4.png" /></p>
<p>In a similar sense we can pull apart the code from above to find why this equation works:</p>
<p><img alt="beziereq5.png" src="https://developer.roblox.com/assets/blt7d7cc1c551a785d0/Beziereq5.png" /></p>
<p>Sure enough, we’re left with the cubic Bézier function!</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">function</span> <span class="n">cubicBezier</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">p0</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">p3</span><span class="p">)</span>
	<span class="k">return</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">t</span><span class="p">)</span><span class="o">^</span><span class="mi">3</span><span class="o">*</span><span class="n">p0</span> <span class="o">+</span> <span class="mi">3</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">t</span><span class="p">)</span><span class="o">^</span><span class="mi">2</span><span class="o">*</span><span class="n">t</span><span class="o">*</span><span class="n">p1</span> <span class="o">+</span> <span class="mi">3</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">t</span><span class="p">)</span><span class="o">*</span><span class="n">t</span><span class="o">^</span><span class="mi">2</span><span class="o">*</span><span class="n">p2</span> <span class="o">+</span> <span class="n">t</span><span class="o">^</span><span class="mi">3</span><span class="o">*</span><span class="n">p3</span>
<span class="n">end</span>
</pre></div>
</div>
<p><img alt="https://developer.roblox.com/assets/blt39e5771948c7202b/Bezier6.gif" src="https://developer.roblox.com/assets/blt39e5771948c7202b/Bezier6.gif" /></p>
<p>It is possible to have Bézier curves of higher degrees by following a similar pattern but for the purpose of this article we’ll stop here at cubic.</p>
</div>
<div class="section" id="arc-length-parameterization">
<h2>Arc-length parameterization<a class="headerlink" href="#arc-length-parameterization" title="Permalink to this headline">¶</a></h2>
<p>So now that we know a bit about how to calculate points along Bézier curves let’s talk about some current issues we might face with them. To start, let’s see what happens when we try to interpolate along our curve at a fixed speed.</p>
<p><img alt="bezier7.gif" src="https://developer.roblox.com/assets/blt36c3b5fb39d66d62/Bezier7.gif" /></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span> <span class="n">function</span> <span class="k">for</span> <span class="n">drawing</span> <span class="n">a</span> <span class="mi">2</span><span class="n">D</span> <span class="n">line</span> <span class="n">between</span> <span class="n">two</span> <span class="n">points</span>
<span class="n">function</span> <span class="n">drawLine</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">)</span>
	<span class="n">local</span> <span class="n">v</span> <span class="o">=</span> <span class="p">(</span><span class="n">p2</span> <span class="o">-</span> <span class="n">p1</span><span class="p">)</span>
	<span class="n">local</span> <span class="n">f</span> <span class="o">=</span> <span class="n">Instance</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;Frame&quot;</span><span class="p">)</span>
	<span class="n">f</span><span class="o">.</span><span class="n">Size</span> <span class="o">=</span> <span class="n">UDim2</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">v</span><span class="o">.</span><span class="n">magnitude</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
	<span class="n">f</span><span class="o">.</span><span class="n">Position</span> <span class="o">=</span> <span class="n">UDim2</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="mi">0</span><span class="p">,(</span><span class="n">p1</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">v</span><span class="o">.</span><span class="n">x</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="o">-</span> <span class="n">f</span><span class="o">.</span><span class="n">Size</span><span class="o">.</span><span class="n">X</span><span class="o">.</span><span class="n">Offset</span> <span class="o">*</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="n">p1</span><span class="o">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">v</span><span class="o">.</span><span class="n">y</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="o">-</span> <span class="n">f</span><span class="o">.</span><span class="n">Size</span><span class="o">.</span><span class="n">Y</span><span class="o">.</span><span class="n">Offset</span> <span class="o">*</span> <span class="mf">0.5</span><span class="p">)</span>
	<span class="n">f</span><span class="o">.</span><span class="n">Rotation</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">deg</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">atan2</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">y</span><span class="p">,</span> <span class="n">v</span><span class="o">.</span><span class="n">x</span><span class="p">))</span>
	<span class="n">f</span><span class="o">.</span><span class="n">BorderSizePixel</span> <span class="o">=</span> <span class="mi">0</span>
	<span class="n">f</span><span class="o">.</span><span class="n">BackgroundColor3</span> <span class="o">=</span> <span class="n">Color3</span><span class="o">.</span><span class="n">new</span><span class="p">()</span>
	<span class="k">return</span> <span class="n">f</span>
<span class="n">end</span>

<span class="n">function</span> <span class="n">update</span><span class="p">(</span><span class="n">p0</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">p3</span><span class="p">,</span> <span class="n">canvas</span><span class="p">)</span>
	<span class="n">local</span> <span class="n">last</span>
	<span class="n">canvas</span><span class="p">:</span><span class="n">ClearAllChildren</span><span class="p">()</span> <span class="o">--</span> <span class="n">clear</span> <span class="nb">any</span> <span class="n">previous</span> <span class="n">drawings</span>
	<span class="k">for</span> <span class="n">t</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.01</span> <span class="n">do</span> <span class="o">--</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">t</span> <span class="o">&lt;=</span> <span class="mi">1</span>
		<span class="n">local</span> <span class="n">p</span> <span class="o">=</span> <span class="n">cubicBezier</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">p0</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">p3</span><span class="p">)</span>
		<span class="k">if</span> <span class="n">last</span> <span class="n">then</span> <span class="n">drawLine</span><span class="p">(</span><span class="n">last</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span><span class="o">.</span><span class="n">Parent</span> <span class="o">=</span> <span class="n">canvas</span> <span class="n">end</span>
		<span class="n">last</span> <span class="o">=</span> <span class="n">p</span>
	<span class="n">end</span>
<span class="n">end</span>

<span class="n">function</span> <span class="n">travelCurve</span><span class="p">(</span><span class="n">p0</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">p3</span><span class="p">,</span> <span class="n">moving</span><span class="p">)</span>
	<span class="k">for</span> <span class="n">t</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.01</span> <span class="n">do</span> <span class="o">--</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">t</span> <span class="o">&lt;=</span> <span class="mi">1</span>
		<span class="n">local</span> <span class="n">p</span> <span class="o">=</span> <span class="n">cubicBezier</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">p0</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">p3</span><span class="p">)</span>
		<span class="n">moving</span><span class="o">.</span><span class="n">Position</span> <span class="o">=</span> <span class="n">UDim2</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">mp</span><span class="o">.</span><span class="n">AbsoluteSize</span><span class="o">.</span><span class="n">x</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">mp</span><span class="o">.</span><span class="n">AbsoluteSize</span><span class="o">.</span><span class="n">y</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
		<span class="n">game</span><span class="p">:</span><span class="n">GetService</span><span class="p">(</span><span class="s2">&quot;RunService&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">RenderStepped</span><span class="p">:</span><span class="n">wait</span><span class="p">()</span>
	<span class="n">end</span>
<span class="n">end</span>
</pre></div>
</div>
<p>Hmm, that doesn’t look like it’s traveling at a linear rate does it? Turns out the reason for this is because by nature of a Bézier curve doesn’t produce points that are evenly distributed. To see this let’s just draw points along the curve.</p>
<p><img alt="bezier8.gif" src="https://developer.roblox.com/assets/bltcdd5fd2ce9185675/Bezier8.gif" /></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span> <span class="n">function</span> <span class="k">for</span> <span class="n">drawing</span> <span class="n">a</span> <span class="mi">2</span><span class="n">D</span> <span class="n">point</span>
<span class="n">function</span> <span class="n">drawPoint</span><span class="p">(</span><span class="n">p1</span><span class="p">)</span>
	<span class="n">local</span> <span class="n">f</span> <span class="o">=</span> <span class="n">Instance</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;Frame&quot;</span><span class="p">)</span>
	<span class="n">f</span><span class="o">.</span><span class="n">Size</span> <span class="o">=</span> <span class="n">UDim2</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
	<span class="n">f</span><span class="o">.</span><span class="n">Position</span> <span class="o">=</span> <span class="n">UDim2</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">p1</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">f</span><span class="o">.</span><span class="n">Size</span><span class="o">.</span><span class="n">X</span><span class="o">.</span><span class="n">Offset</span> <span class="o">*</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">p1</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="n">f</span><span class="o">.</span><span class="n">Size</span><span class="o">.</span><span class="n">Y</span><span class="o">.</span><span class="n">Offset</span> <span class="o">*</span> <span class="mf">0.5</span><span class="p">)</span>
	<span class="n">f</span><span class="o">.</span><span class="n">BorderSizePixel</span> <span class="o">=</span> <span class="mi">0</span>
	<span class="n">f</span><span class="o">.</span><span class="n">BackgroundColor3</span> <span class="o">=</span> <span class="n">Color3</span><span class="o">.</span><span class="n">new</span><span class="p">()</span>
	<span class="k">return</span> <span class="n">f</span>
<span class="n">end</span>

<span class="n">function</span> <span class="n">update</span><span class="p">(</span><span class="n">p0</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">p3</span><span class="p">,</span> <span class="n">canvas</span><span class="p">)</span>
	<span class="n">local</span> <span class="n">last</span>
	<span class="n">canvas</span><span class="p">:</span><span class="n">ClearAllChildren</span><span class="p">()</span> <span class="o">--</span> <span class="n">clear</span> <span class="nb">any</span> <span class="n">previous</span> <span class="n">drawings</span>
	<span class="k">for</span> <span class="n">t</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.01</span> <span class="n">do</span> <span class="o">--</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">t</span> <span class="o">&lt;=</span> <span class="mi">1</span>
		<span class="n">local</span> <span class="n">p</span> <span class="o">=</span> <span class="n">cubicBezier</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">p0</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">p3</span><span class="p">)</span>
		<span class="n">drawPoint</span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="o">.</span><span class="n">Parent</span> <span class="o">=</span> <span class="n">world</span>
		<span class="n">last</span> <span class="o">=</span> <span class="n">p</span>
	<span class="n">end</span>
<span class="n">end</span>
</pre></div>
</div>
<p>As shown in the gif above, the points near the middle are more tightly packed together and the points closer to the start and end of the curve are further apart. This creates an effect of slowing down in the middle and getting faster near the start and end. So what can we do to fix this problem? In other words, how can we make it so that t = 0.25 is guaranteed to be 25% along the curve’s distance?</p>
<p>Turns out the simplest way to do this is a best guess method which isn’t perfect, but it’s so close that unless you’re working for NASA you won’t even notice it. To be clear, there are other ways to do this that are more accurate, but they require calculus which is out of the scope of this article.</p>
<p>Here’s how the process works:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span> <span class="n">n</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">number</span> <span class="n">of</span> <span class="n">points</span>
<span class="o">--</span> <span class="n">func</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">bezier</span> <span class="n">curve</span> <span class="n">function</span>
<span class="o">--</span> <span class="o">...</span> <span class="n">are</span> <span class="n">the</span> <span class="n">points</span> <span class="n">used</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">bezier</span> <span class="n">curve</span> <span class="n">function</span>
<span class="n">function</span> <span class="n">length</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">func</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
	<span class="n">local</span> <span class="nb">sum</span><span class="p">,</span> <span class="n">ranges</span><span class="p">,</span> <span class="n">sums</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="p">{},</span> <span class="p">{}</span>
	<span class="k">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span> <span class="n">do</span>
		<span class="o">--</span> <span class="n">calculate</span> <span class="n">the</span> <span class="n">current</span> <span class="n">point</span> <span class="ow">and</span> <span class="n">the</span> <span class="nb">next</span> <span class="n">point</span>
		<span class="n">local</span> <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="n">i</span><span class="o">/</span><span class="n">n</span><span class="p">,</span> <span class="o">...</span><span class="p">),</span> <span class="n">func</span><span class="p">((</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="n">n</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
		<span class="o">--</span> <span class="n">get</span> <span class="n">the</span> <span class="n">distance</span> <span class="n">between</span> <span class="n">them</span>
		<span class="n">local</span> <span class="n">dist</span> <span class="o">=</span> <span class="p">(</span><span class="n">p2</span> <span class="o">-</span> <span class="n">p1</span><span class="p">)</span><span class="o">.</span><span class="n">magnitude</span>
		<span class="o">--</span> <span class="n">store</span> <span class="n">the</span> <span class="n">information</span> <span class="n">we</span> <span class="n">gathered</span> <span class="ow">in</span> <span class="n">a</span> <span class="n">table</span> <span class="n">that</span><span class="s1">&#39;s indexed by the current distance</span>
		<span class="n">ranges</span><span class="p">[</span><span class="nb">sum</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">dist</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">}</span>
		<span class="o">--</span> <span class="n">store</span> <span class="n">the</span> <span class="n">current</span> <span class="nb">sum</span> <span class="n">so</span> <span class="n">we</span> <span class="n">can</span> <span class="n">easily</span> <span class="n">sort</span> <span class="n">through</span> <span class="n">it</span> <span class="n">later</span>
		<span class="n">table</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">sums</span><span class="p">,</span> <span class="nb">sum</span><span class="p">)</span>
		<span class="o">--</span> <span class="n">update</span> <span class="n">the</span> <span class="nb">sum</span>
		<span class="nb">sum</span> <span class="o">=</span> <span class="nb">sum</span> <span class="o">+</span> <span class="n">dist</span>
	<span class="n">end</span>
	<span class="o">--</span> <span class="k">return</span> <span class="n">values</span>
	<span class="k">return</span> <span class="nb">sum</span><span class="p">,</span> <span class="n">ranges</span><span class="p">,</span> <span class="n">sums</span>
<span class="n">end</span>
</pre></div>
</div>
<p>With that in mind we can use that function in tandem with another to get a pretty good guess of the actual linear position t would represent along the Bezier curve:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">function</span> <span class="n">fixedBezier</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">func</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
	<span class="o">--</span> <span class="n">gather</span> <span class="n">values</span> <span class="kn">from</span> <span class="nn">length</span> <span class="n">function</span>
	<span class="n">local</span> <span class="n">length</span><span class="p">,</span> <span class="n">ranges</span><span class="p">,</span> <span class="n">sums</span> <span class="o">=</span> <span class="n">length</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">func</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
	<span class="o">--</span> <span class="n">find</span> <span class="n">how</span> <span class="n">far</span> <span class="n">along</span> <span class="n">the</span> <span class="n">length</span> <span class="n">we</span> <span class="n">should</span> <span class="n">be</span>
	<span class="n">local</span> <span class="n">T</span><span class="p">,</span> <span class="n">near</span> <span class="o">=</span> <span class="n">t</span> <span class="o">*</span> <span class="n">length</span><span class="p">,</span> <span class="mi">0</span>
	<span class="o">--</span> <span class="n">get</span> <span class="n">the</span> <span class="n">nearest</span> <span class="n">point</span> <span class="n">we</span> <span class="n">calculated</span>
	<span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">next</span><span class="p">,</span> <span class="n">sums</span> <span class="n">do</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">T</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="n">then</span> <span class="k">break</span> <span class="n">end</span>
		<span class="n">near</span> <span class="o">=</span> <span class="n">n</span>
	<span class="n">end</span>
	<span class="n">local</span> <span class="nb">set</span> <span class="o">=</span> <span class="n">ranges</span><span class="p">[</span><span class="n">near</span><span class="p">]</span>
	<span class="o">--</span> <span class="n">linearly</span> <span class="n">interpolate</span> <span class="n">between</span> <span class="n">that</span> <span class="n">point</span> <span class="ow">and</span> <span class="n">its</span> <span class="n">neighbor</span>
	<span class="n">local</span> <span class="n">percent</span> <span class="o">=</span> <span class="p">(</span><span class="n">T</span> <span class="o">-</span> <span class="n">near</span><span class="p">)</span><span class="o">/</span><span class="nb">set</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
	<span class="k">return</span> <span class="nb">set</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="nb">set</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="nb">set</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">*</span> <span class="n">percent</span>
<span class="n">end</span>
</pre></div>
</div>
<p>Here’s the problem, when our current function is used consecutively this causes a lot of lag! We’re using the length function which has to do a ton of point calculations every time for just one single point! Here’s the good news though, if we use a bit of object oriented programming we can store the values the length function and make sure to update it only when the points that create the Bézier change!</p>
<p>Here’s a nice little Bézier module that should work with any degree of Bézier function:</p>
<p><img alt="bezier9.gif" src="https://developer.roblox.com/assets/blt2ee53c6a18bb5ec1/Bezier9.gif" /></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">local</span> <span class="n">bezier</span> <span class="o">=</span> <span class="p">{}</span>

<span class="n">function</span> <span class="n">length</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">func</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
	<span class="n">local</span> <span class="nb">sum</span><span class="p">,</span> <span class="n">ranges</span><span class="p">,</span> <span class="n">sums</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="p">{},</span> <span class="p">{}</span>
	<span class="k">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">n</span><span class="o">-</span><span class="mi">1</span> <span class="n">do</span>
		<span class="n">local</span> <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="n">i</span><span class="o">/</span><span class="n">n</span><span class="p">,</span> <span class="o">...</span><span class="p">),</span> <span class="n">func</span><span class="p">((</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="n">n</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
		<span class="n">local</span> <span class="n">dist</span> <span class="o">=</span> <span class="p">(</span><span class="n">p2</span> <span class="o">-</span> <span class="n">p1</span><span class="p">)</span><span class="o">.</span><span class="n">magnitude</span>
		<span class="n">ranges</span><span class="p">[</span><span class="nb">sum</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">dist</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">}</span>
		<span class="n">table</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">sums</span><span class="p">,</span> <span class="nb">sum</span><span class="p">)</span>
		<span class="nb">sum</span> <span class="o">=</span> <span class="nb">sum</span> <span class="o">+</span> <span class="n">dist</span>
	<span class="n">end</span>
	<span class="k">return</span> <span class="nb">sum</span><span class="p">,</span> <span class="n">ranges</span><span class="p">,</span> <span class="n">sums</span>
<span class="n">end</span>

<span class="n">function</span> <span class="n">bezier</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
	<span class="n">local</span> <span class="bp">self</span> <span class="o">=</span> <span class="n">setmetatable</span><span class="p">({},</span> <span class="p">{</span><span class="n">__index</span> <span class="o">=</span> <span class="n">bezier</span><span class="p">})</span>
	<span class="n">local</span> <span class="nb">sum</span><span class="p">,</span> <span class="n">ranges</span><span class="p">,</span> <span class="n">sums</span> <span class="o">=</span> <span class="n">length</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">func</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">func</span> <span class="o">=</span> <span class="n">func</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">=</span> <span class="n">n</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">points</span> <span class="o">=</span> <span class="p">{</span><span class="o">...</span><span class="p">}</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">length</span> <span class="o">=</span> <span class="nb">sum</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">ranges</span> <span class="o">=</span> <span class="n">ranges</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">sums</span> <span class="o">=</span> <span class="n">sums</span>
	<span class="k">return</span> <span class="bp">self</span>
<span class="n">end</span>

<span class="n">function</span> <span class="n">bezier</span><span class="p">:</span><span class="n">setPoints</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
	<span class="o">--</span> <span class="n">only</span> <span class="n">update</span> <span class="n">the</span> <span class="n">length</span> <span class="n">when</span> <span class="n">the</span> <span class="n">control</span> <span class="n">points</span> <span class="n">are</span> <span class="n">changed</span>
	<span class="n">local</span> <span class="nb">sum</span><span class="p">,</span> <span class="n">ranges</span><span class="p">,</span> <span class="n">sums</span> <span class="o">=</span> <span class="n">length</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">func</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">points</span> <span class="o">=</span> <span class="p">{</span><span class="o">...</span><span class="p">}</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">length</span> <span class="o">=</span> <span class="nb">sum</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">ranges</span> <span class="o">=</span> <span class="n">ranges</span>
	<span class="bp">self</span><span class="o">.</span><span class="n">sums</span> <span class="o">=</span> <span class="n">sums</span>
<span class="n">end</span>

<span class="n">function</span> <span class="n">bezier</span><span class="p">:</span><span class="n">calc</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
	<span class="o">--</span> <span class="k">if</span> <span class="n">you</span> <span class="n">don</span><span class="s1">&#39;t need t to be a percentage of distance</span>
	<span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">func</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">unpack</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">points</span><span class="p">))</span>
<span class="n">end</span>

<span class="n">function</span> <span class="n">bezier</span><span class="p">:</span><span class="n">calcFixed</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
	<span class="n">local</span> <span class="n">T</span><span class="p">,</span> <span class="n">near</span> <span class="o">=</span> <span class="n">t</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span><span class="p">,</span> <span class="mi">0</span>
	<span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">next</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">sums</span> <span class="n">do</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">T</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="n">then</span> <span class="k">break</span> <span class="n">end</span>
		<span class="n">near</span> <span class="o">=</span> <span class="n">n</span>
	<span class="n">end</span>
	<span class="n">local</span> <span class="nb">set</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ranges</span><span class="p">[</span><span class="n">near</span><span class="p">]</span>
	<span class="n">local</span> <span class="n">percent</span> <span class="o">=</span> <span class="p">(</span><span class="n">T</span> <span class="o">-</span> <span class="n">near</span><span class="p">)</span><span class="o">/</span><span class="nb">set</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
	<span class="k">return</span> <span class="nb">set</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="nb">set</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">percent</span>
<span class="n">end</span>

<span class="k">return</span> <span class="n">bezier</span>
</pre></div>
</div>
</div>
<div class="section" id="bezier-paths">
<h2>Bézier paths<a class="headerlink" href="#bezier-paths" title="Permalink to this headline">¶</a></h2>
<p>The last thing this article will cover is the idea of connecting multiple Bézier curves together. For visual purposes the concept is easy. Just make sure that the start point of your next Bézier curve is the same as the last point on the previous Bézier curve. What becomes more difficult is making these curves into a single interpolation function. Luckily for us, it’s a similar process to Arc-length parameterization except we already have all the values we need!</p>
<p>For example let’s assume we’re using the module from above:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span> <span class="n">bzs</span> <span class="ow">is</span> <span class="n">table</span> <span class="k">with</span> <span class="n">bezier</span> <span class="n">urves</span> <span class="ow">in</span> <span class="n">it</span> <span class="ow">in</span> <span class="n">order</span> <span class="n">traveled</span>
<span class="n">function</span> <span class="n">travelPath</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">bzs</span><span class="p">)</span>
	<span class="n">local</span> <span class="n">totalLength</span><span class="p">,</span> <span class="n">sums</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="p">{}</span>
	<span class="o">--</span> <span class="n">get</span> <span class="n">total</span> <span class="n">length</span> <span class="n">of</span> <span class="nb">all</span> <span class="n">curves</span><span class="p">,</span> <span class="n">also</span> <span class="n">order</span> <span class="n">sums</span> <span class="k">for</span> <span class="n">sorting</span>
	<span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">bz</span> <span class="ow">in</span> <span class="nb">next</span><span class="p">,</span> <span class="n">bzs</span> <span class="n">do</span>
		<span class="n">table</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">sums</span><span class="p">,</span> <span class="n">totalLength</span><span class="p">)</span>
		<span class="n">totalLength</span> <span class="o">=</span> <span class="n">totalLength</span> <span class="o">+</span> <span class="n">bz</span><span class="o">.</span><span class="n">length</span>
	<span class="n">end</span>
	<span class="o">--</span> <span class="n">get</span> <span class="n">percentage</span> <span class="n">of</span> <span class="n">total</span> <span class="n">distance</span> <span class="ow">and</span> <span class="n">find</span> <span class="n">the</span> <span class="n">bezier</span> <span class="n">curve</span> <span class="n">we</span><span class="s1">&#39;re on</span>
	<span class="n">local</span> <span class="n">T</span><span class="p">,</span> <span class="n">near</span><span class="p">,</span> <span class="n">bz</span> <span class="o">=</span> <span class="n">t</span> <span class="o">*</span> <span class="n">totalLength</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">bzs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
	<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">ipairs</span><span class="p">(</span><span class="n">sums</span><span class="p">)</span> <span class="n">do</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">T</span> <span class="o">-</span> <span class="n">n</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="n">then</span> <span class="k">break</span> <span class="n">end</span>
		<span class="n">near</span><span class="p">,</span> <span class="n">bz</span> <span class="o">=</span> <span class="n">n</span><span class="p">,</span> <span class="n">bzs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
	<span class="n">end</span>
	<span class="o">--</span> <span class="n">get</span> <span class="n">relative</span> <span class="n">percentage</span> <span class="n">traveled</span> <span class="n">on</span> <span class="n">given</span> <span class="n">bezier</span> <span class="n">curve</span>
	<span class="n">local</span> <span class="n">percent</span> <span class="o">=</span> <span class="p">(</span><span class="n">T</span> <span class="o">-</span> <span class="n">near</span><span class="p">)</span><span class="o">/</span><span class="n">bz</span><span class="o">.</span><span class="n">length</span>
	<span class="o">--</span> <span class="n">lerp</span> <span class="n">across</span> <span class="n">curve</span> <span class="n">by</span> <span class="n">percentage</span>
	<span class="n">local</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="n">bz</span><span class="p">:</span><span class="n">calcFixed</span><span class="p">(</span><span class="n">percent</span><span class="p">)</span>
	<span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="p">(</span><span class="n">b</span> <span class="o">-</span> <span class="n">a</span><span class="p">)</span> <span class="o">*</span> <span class="n">c</span>
<span class="n">end</span>
</pre></div>
</div>
<p>That’s all there is to it! We can also use Bézier curves in 3D since lerping with 3D and 2D vectors is the same.</p>
<p><img alt="bezier10.gif" src="https://developer.roblox.com/assets/blt1098a20ff5999294/Bezier10.gif" /></p>
<p>***<strong>Roblox官方链接</strong>:[Bézier Curves](https://developer.roblox.com/zh-cn/articles/Bézier Curves)</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, ankazen

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>