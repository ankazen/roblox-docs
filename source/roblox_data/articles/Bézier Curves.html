<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    <link rel="canonical" href="https://developer.roblox.com/articles/Bezier-curves"/>
    <link rel="alternate" hreflang="x-default" href="https://developer.roblox.com/articles/Bezier-curves"/>
    
      <link rel="alternate" hreflang="en-us" href="https://developer.roblox.com/en-us/"/>
    
      <link rel="alternate" hreflang="zh-cn" href="https://developer.roblox.com/zh-cn/"/>
    
      
        
          <title> Bézier Curves</title>
        
      

      
        
      

      <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta class="swiftype" name="locale" data-type="string" content="zh-cn">



<meta name="description" content="<p>Use code to draw curves that can be used in designs or pathfinding</p>">



<meta name="keywords" content="">


<meta name="author" content="Roblox">



	<meta class="swiftype" name="title" data-type="string" content="Bézier Curves">
	<meta class="swiftype" name="summary" data-type="string" content="<p>Use code to draw curves that can be used in designs or pathfinding</p>">
	<meta class="swiftype" name="segment" data-type="string" content="articles">
	<meta class="swiftype" name="category" data-type="string" content="编码与脚本">
	<meta class="swiftype" name="hide_from_search" data-type="string" content="">





       
  </head>
  <body>
    

<!-- Evidon Tag Management -->
<script type="text/javascript" src="https://dk135eecbplh9.cloudfront.net/public/js/evidon.js"></script>

<!-- Favicon -->
<link rel="shortcut icon" href="https://dk135eecbplh9.cloudfront.net/public/images/favicon.ico" type="image/x-icon">
<link rel="icon" href="https://dk135eecbplh9.cloudfront.net/public/images/favicon.ico" type="image/x-icon" />

<!-- Sentry.io -->
<script src="https://browser.sentry-cdn.com/5.12.1/bundle.min.js"
	integrity="sha384-y+an4eARFKvjzOivf/Z7JtMJhaN6b+lLQ5oFbBbUwZNNVir39cYtkjW1r6Xjbxg3"
	crossorigin="anonymous"></script>
<script type="text/javascript">
	Sentry.init({ dsn: 'https://d22e972d03124ce6b4468bfd38f6bfde@sentry.io/2246250' });
</script>

<link href="https://dk135eecbplh9.cloudfront.net/public/css/prettify.css" rel="stylesheet" type="text/css">
<link href="https://dk135eecbplh9.cloudfront.net/public/css/select2.css" rel="stylesheet" type="text/css">
<link href="https://dk135eecbplh9.cloudfront.net/public/css/font-awesome.min.css" rel="stylesheet" type="text/css">
<link href="https://dk135eecbplh9.cloudfront.net/public/css/main.css" rel="stylesheet" type="text/css">

<script src="https://dk135eecbplh9.cloudfront.net/public/js/jquery-3.3.1.min.js"></script>
<script src="https://dk135eecbplh9.cloudfront.net/public/js/popper.min.js"></script>
<script src="https://dk135eecbplh9.cloudfront.net/public/js/jPages.js"></script>
<script src="https://dk135eecbplh9.cloudfront.net/public/js/bootstrap.min.js"></script>
<script src="https://dk135eecbplh9.cloudfront.net/public/js/bootstrap-toc.js"></script>
<!-- <script src="https://dk135eecbplh9.cloudfront.net/public/js/docs.min.js"></script> -->
<script src="https://dk135eecbplh9.cloudfront.net/public/js/prettify.js"></script>
<script src="https://dk135eecbplh9.cloudfront.net/public/js/lang-lua.js"></script>
<script src="https://dk135eecbplh9.cloudfront.net/public/js/select2.js"></script>
<script src="https://dk135eecbplh9.cloudfront.net/public/js/clipboard.min.js"></script>

<script src="https://dk135eecbplh9.cloudfront.net/public/js/autolinking.js"></script>
<script src="https://dk135eecbplh9.cloudfront.net/public/js/lightbox.js"></script>
<script src="https://dk135eecbplh9.cloudfront.net/public/js/half-sized.js"></script>
<script src="https://cdn.knightlab.com/libs/juxtapose/latest/js/juxtapose.min.js"></script>
<link rel="stylesheet" href="https://cdn.knightlab.com/libs/juxtapose/latest/css/juxtapose.css">

<script type="text/javascript" src="https://dk135eecbplh9.cloudfront.net/public/js/jquery.cookie.js"></script>
<script type="text/javascript" src="https://dk135eecbplh9.cloudfront.net/public/js/encrypt-md5.js"></script>
<!-- <script type="text/javascript" src="https://dk135eecbplh9.cloudfront.net/public/js/gdpr.js"></script> -->

<script src="https://dk135eecbplh9.cloudfront.net/public/js/script.js"></script>
<script src="https://dk135eecbplh9.cloudfront.net/public/js/codesample-theme.js"></script>
<script src="https://dk135eecbplh9.cloudfront.net/public/js/code-highlighting.js"></script>
<!-- <script src="https://dk135eecbplh9.cloudfront.net/public/js/local-codesamples.js"></script> -->
<script src="https://dk135eecbplh9.cloudfront.net/public/js/language-dropdown.js"></script>

<script src="https://dk135eecbplh9.cloudfront.net/public/js/event_template_one.js"></script>

<script type="text/javascript" src="https://dk135eecbplh9.cloudfront.net/public/js/jquery.swiftype.autocomplete.js">
</script>
<script type='text/javascript' src='https://dk135eecbplh9.cloudfront.net/public/js/jquery.ba-hashchange.min.js'></script>
<script type="text/javascript" src="https://dk135eecbplh9.cloudfront.net/public/js/jquery.swiftype.search.js"></script>
<script type="text/javascript" src="https://dk135eecbplh9.cloudfront.net/public/js/jquery.swiftype.livesearch.js">
</script>

<script type="text/javascript" src="https://dk135eecbplh9.cloudfront.net/public/js/st.custom.search.js"
	engineID="PcoWSkbVqDnWTu_dm2ix"></script>
<span class="d-none swiftype-engine-id">PcoWSkbVqDnWTu_dm2ix</span>

    
  <div class="main-container learn-roblox-pages sub-pages">
    
  

  

  <div class="header-wrap clearfix no-print">
    <nav class="header navbar navbar-expand-lg navbar-light bd-navbar" data-swiftype-index='false'>
      <div class="d-flex">
        <span class="d-lg-none toggler-icon">&#9776;</span>
      </div>

      <div class="logo">
        <a style="background-image: url('https://dk135eecbplh9.cloudfront.net/assets/blta0080185413748f5/logo.png');" href="/" target="_self">
        </a>
      </div>
      <div class="wrap">
        <div class="slide-overlay"></div>
        <div class="navbar-collapse">
          <div class="navbar-inner">
            <span class="d-lg-none closebtn">&times;</span>
            <div class="nav-wrap">
              <p class="d-lg-none home-link"><a href="/">主页</a></p>
              <ul class="navbar-nav bd-navbar-nav">
                <div class="relevant-sidebar">
                  
                    <div class="d-none d-lg-block bd-sidebar" data-swiftype-index='false'>
  <span class="back-icon">
    <span><img class="l-arrow" src="https://dk135eecbplh9.cloudfront.net/public/images/l-arrow.svg"/></span>
  </span>
  <nav class="bd-links" id="bd-docs-nav">
    <div class="bd-toc-item-wrap">
      <h5 class="bd-toc-heading">教程</h5>
      <div>
        
          
        
          
        
          
        
          
            <div class="bd-toc-item learn-roblox-tutorial">
              <a class="bd-toc-link" href="/learn-roblox/studio-basics">
                <span>Studio 基础知识</span>
              </a>
            </div>
          
        
          
            <div class="bd-toc-item learn-roblox-tutorial">
              <a class="bd-toc-link" href="/learn-roblox/creating">
                <span>创建</span>
              </a>
            </div>
          
        
          
            <div class="bd-toc-item learn-roblox-tutorial">
              <a class="bd-toc-link" href="/learn-roblox/international">
                <span>国际化</span>
              </a>
            </div>
          
        
          
            <div class="bd-toc-item learn-roblox-tutorial">
              <a class="bd-toc-link" href="/learn-roblox/sound-lighting-fx">
                <span>声效、光照与特效</span>
              </a>
            </div>
          
        
          
            <div class="bd-toc-item learn-roblox-tutorial">
              <a class="bd-toc-link" href="/learn-roblox/marketing">
                <span>市场营销</span>
              </a>
            </div>
          
        
          
            <div class="bd-toc-item learn-roblox-tutorial">
              <a class="bd-toc-link" href="/learn-roblox/optimization">
                <span>性能优化</span>
              </a>
            </div>
          
        
          
            <div class="bd-toc-item learn-roblox-tutorial">
              <a class="bd-toc-link" href="/learn-roblox/all-tutorials">
                <span>所有内容</span>
              </a>
            </div>
          
        
          
            <div class="bd-toc-item learn-roblox-tutorial">
              <a class="bd-toc-link" href="/learn-roblox/analytics">
                <span>数据分析</span>
              </a>
            </div>
          
        
          
        
          
            <div class="bd-toc-item learn-roblox-tutorial">
              <a class="bd-toc-link" href="/learn-roblox/user-interface">
                <span>用户界面</span>
              </a>
            </div>
          
        
          
            <div class="bd-toc-item learn-roblox-tutorial">
              <a class="bd-toc-link" href="/learn-roblox/monetization">
                <span>盈利</span>
              </a>
            </div>
          
        
          
            <div class="bd-toc-item learn-roblox-tutorial">
              <a class="bd-toc-link" href="/learn-roblox/coding-scripts">
                <span>编码与脚本</span>
              </a>
            </div>
          
        
          
            <div class="bd-toc-item learn-roblox-tutorial">
              <a class="bd-toc-link" href="/learn-roblox/cross-platform">
                <span>跨平台发展</span>
              </a>
            </div>
          
        
      </div>
    </div>
  </nav>
</div>

                  
                </div>
                
                  <li class="nav-item">
                    <a class="nav-link" target="_self" href="/quick-start">
                      <span>入门</span>
                      <img class="r-arrow" src="https://dk135eecbplh9.cloudfront.net/public/images/r-arrow.svg"/>
                    </a>
                  </li>
                
                  <li class="nav-item">
                    <a class="nav-link" target="_self" href="/learn-roblox/all-tutorials">
                      <span>了解 Roblox</span>
                      <img class="r-arrow" src="https://dk135eecbplh9.cloudfront.net/public/images/r-arrow.svg"/>
                    </a>
                  </li>
                
                  <li class="nav-item">
                    <a class="nav-link" target="_self" href="/api-reference">
                      <span>API 参考</span>
                      <img class="r-arrow" src="https://dk135eecbplh9.cloudfront.net/public/images/r-arrow.svg"/>
                    </a>
                  </li>
                
                  <li class="nav-item">
                    <a class="nav-link" target="_self" href="/resources">
                      <span>资源</span>
                      <img class="r-arrow" src="https://dk135eecbplh9.cloudfront.net/public/images/r-arrow.svg"/>
                    </a>
                  </li>
                
                  <li class="nav-item">
                    <a class="nav-link" target="_blank" href="https://devforum.roblox.com">
                      <span>社区</span>
                      <img class="r-arrow" src="https://dk135eecbplh9.cloudfront.net/public/images/r-arrow.svg"/>
                    </a>
                  </li>
                
              </ul>
               <a class="dwd-link d-lg-none" target="_self" href="">
                
              </a>
            </div>
          </div>
          <div class="actions-wrap">
            <a class="dwd-link" target="_self" href="">
                
            </a>
            <span class="m-search-icon"></span>
            <div class="search-box">

                <form class="d-flex align-items-center" id="search-form">
                   <input class="form-control" name="s" type="search" id="st-search-input" placeholder="搜索">
                    <button class="btn-submit" type="submit"><i class="search-icon"></i></button>
                </form>
                <a href="javascript:void(0)" class="search-close">&times;</a>
                <div id="searchDropdown" class="search-content">
                  <div class="search-content-inner">
                    <div class="inner-scroll">
                      <div class="categories">
                        <span class="lbl">Articles</span>
                        <ul>
                          <li>Animation in player script</li>
                          <li>Animation handler</li>
                          <li>Bubbly Animation Package</li>
                        </ul>
                      </div>
                      <div class="categories">
                        <span class="lbl">API Refernce</span>
                        <ul>
                          <li>animationController</li>
                          <li>animationID</li>
                          <li>Bubbly Animation Package</li>
                        </ul>
                      </div>
                    </div>
                  </div>
                </div>
            </div>
          </div>
        </div>
      </div>
    </nav>
  </div>





 		<div class="container-fluid">
      <div class="row flex-xl-nowrap">
        

  <div class="d-none d-lg-block bd-sidebar-wrap" data-swiftype-index='false'>
    <div class="flex-wrapper">
      <span class="toggle-sidebar sm-toggle collapse-slide">
        <a href="javascript:void(0)" class="arrow-right">
          <i class="arrow arrow-r"></i>
        </a>
      </span>
      <div class="slide-sidebar">
       <span class="toggle-sidebar expanded-slide">
          <a href="javascript:void(0)" class="">
            <i class="arrow arrow-l"></i>
            <span class="txt">关闭侧边栏</span>
          </a>
       </span>
        <div class="bd-sidebar" data-swiftype-index='false'>
          <span class="back-icon">
            <span><img class="l-arrow" src="https://dk135eecbplh9.cloudfront.net/public/images/l-arrow.svg"/></span>
          </span>
          <nav class="bd-links" id="bd-docs-nav">
            <div class="bd-toc-item-wrap">
              <h5 class="bd-toc-heading">教程</h5>
              <div>
                
                  
                
                  
                
                  
                
                  
                  <div class="bd-toc-item learn-roblox-tutorial">
                    <a class="bd-toc-link" href="/learn-roblox/studio-basics">
                      <span>Studio 基础知识</span>
                    </a>
                  </div>
                  
                
                  
                  <div class="bd-toc-item learn-roblox-tutorial">
                    <a class="bd-toc-link" href="/learn-roblox/creating">
                      <span>创建</span>
                    </a>
                  </div>
                  
                
                  
                  <div class="bd-toc-item learn-roblox-tutorial">
                    <a class="bd-toc-link" href="/learn-roblox/international">
                      <span>国际化</span>
                    </a>
                  </div>
                  
                
                  
                  <div class="bd-toc-item learn-roblox-tutorial">
                    <a class="bd-toc-link" href="/learn-roblox/sound-lighting-fx">
                      <span>声效、光照与特效</span>
                    </a>
                  </div>
                  
                
                  
                  <div class="bd-toc-item learn-roblox-tutorial">
                    <a class="bd-toc-link" href="/learn-roblox/marketing">
                      <span>市场营销</span>
                    </a>
                  </div>
                  
                
                  
                  <div class="bd-toc-item learn-roblox-tutorial">
                    <a class="bd-toc-link" href="/learn-roblox/optimization">
                      <span>性能优化</span>
                    </a>
                  </div>
                  
                
                  
                  <div class="bd-toc-item learn-roblox-tutorial">
                    <a class="bd-toc-link" href="/learn-roblox/all-tutorials">
                      <span>所有内容</span>
                    </a>
                  </div>
                  
                
                  
                  <div class="bd-toc-item learn-roblox-tutorial">
                    <a class="bd-toc-link" href="/learn-roblox/analytics">
                      <span>数据分析</span>
                    </a>
                  </div>
                  
                
                  
                
                  
                  <div class="bd-toc-item learn-roblox-tutorial">
                    <a class="bd-toc-link" href="/learn-roblox/user-interface">
                      <span>用户界面</span>
                    </a>
                  </div>
                  
                
                  
                  <div class="bd-toc-item learn-roblox-tutorial">
                    <a class="bd-toc-link" href="/learn-roblox/monetization">
                      <span>盈利</span>
                    </a>
                  </div>
                  
                
                  
                  <div class="bd-toc-item learn-roblox-tutorial">
                    <a class="bd-toc-link" href="/learn-roblox/coding-scripts">
                      <span>编码与脚本</span>
                    </a>
                  </div>
                  
                
                  
                  <div class="bd-toc-item learn-roblox-tutorial">
                    <a class="bd-toc-link" href="/learn-roblox/cross-platform">
                      <span>跨平台发展</span>
                    </a>
                  </div>
                  
                
              </div>
            </div>
          </nav>
        </div>
      </div>
    </div>
  </div>



        <div class="w-100 d-md-none d-lg-none d-xl-none">
          <div class="m-heading">
            
<ol class="breadcrumb" data-swiftype-index='false'>
  
    
    <li class="breadcrumb-item">
      <a href="/learn-roblox/all-tutorials">学习 ROBLOX</a>
    </li>
    
  
    
    <li class="breadcrumb-item">
      <a href="/learn-roblox/coding-scripts">编码与脚本</a>
    </li>
    
  
</ol>

            <h1 data-toc-skip>Bézier Curves</h1>
          </div>
        </div>
        
        

<div class="d-xl-block bd-toc-wrap">
  <div class="bd-toc">
    <a href="javascript:void(0)" class="toggle-toc hide-toc">
      <i class="fa fa-angle-down"></i>
      <span class="toggle-txt">隐藏内容索引</span>
    </a>
    <a href="javascript:void(0)" class="toggle-toc show-toc invisible">
      <i class="fa fa-angle-down"></i>
      <span class="toggle-txt">显示内容索引</span>
    </a>
    <div class="toc-nav">
      <div class="inner-toc-nav">
        <div class="toc-content"><a href="javascript:void(0)">内容索引</a>
        </div>
        <nav id="toc">
        </nav>
      </div>
    </div>
  </div>
</div>



        <main class="bd-content" data-swiftype-name="body" data-swiftype-type="text" data-swiftype-index='true'>
          <div class="l-content toc-scope">
            <div class="d-none d-md-block d-lg-block d-xl-block">
              
<ol class="breadcrumb" data-swiftype-index='false'>
  
    
    <li class="breadcrumb-item">
      <a href="/learn-roblox/all-tutorials">学习 ROBLOX</a>
    </li>
    
  
    
    <li class="breadcrumb-item">
      <a href="/learn-roblox/coding-scripts">编码与脚本</a>
    </li>
    
  
</ol>

              <h1 data-toc-skip data-swiftype-index='false'>Bézier Curves</h1>
            </div>
            <p class="timestamp-wrap" data-swiftype-index='false'>
              
            </p>

            
            <div class="article-details">
              
                




   
    
      <div class="markdown-field-data">
        <p>Game development often requires using curves, such as drawing curvy shapes or travelling along a non-linear path. However, computers require a function in order to perform calculations. For lines, equations are quite simple (y = mx +b). Curves, on the other hand, tend to be a bit more complicated. A <strong>Bézier curve</strong> is an easier type of curve that is useful in a wide variety of places in game design. You’ll need to be somewhat comfortable with the following math topics in order to get started:</p>
<ul>
<li>Algebra</li>
<li>Linear interpolation</li>
<li>Vectors</li>
</ul>
<h2>Quadratic Bézier curves</h2>
<p>A <strong>quadratic Bézier curve</strong> is a curve created using <strong>three points</strong>. The first and the third point define the start and the end of the curve. The intermediate point influences the curvature of the line, and is most of the time not on the curve.<br>
Here’s what one quadratic Bézier looks like:</p>
<p><img src="/assets/blt6f28a20d3417e288/Bezier1.png" alt="bezier1.png"></p>
<p>This may seem confusing at first, but it’s simpler than it appears: the function is lerping along the line between between p0 and p1 while simultaneously lerping along the line between p1 and p2. We’re then taking the two points created by those two lerp functions and then lerping along that value to get our point on the curve. This looks something like this:</p>
<p><img src="/assets/blt6bac53c6c6f16b7b/Bezier2.gif" alt="bezier2.gif"></p>
<p>We can write it in code form as such:</p>
<pre><code class="language-lua">function lerp(a, b, c)
	return a + (b - a) * c
end

function quadBezier(t, p0, p1, p2)
	local l1 = lerp(p0, p1, t)
	local l2 = lerp(p1, p2, t)
	local quad = lerp(l1, l2, t)
	return quad
end
</code></pre>
<p>This function is alright and there’s nothing wrong with it, but there’s a more formal equation that’s commonly used for quadratic Bézier curves.</p>
<p><img src="/assets/blte9e328e234646be2/Beziereq1.png" alt="beziereq1.png"></p>
<p>To understand why this equation works we have to first think about how we would create a linear Bézier curve (not really a curve now is it?). If you’re up to date on the prerequisites of the article then you already know how to do this in the form of a linear interpolation between two points!</p>
<p><img src="/assets/blt3e7f7e13dc09fbd3/Beziereq2.png" alt="beziereq2.png"></p>
<p>We already know how to do a quadratic Bezier using three linear interpolations like we did in the code above so let’s try writing that out with our linear B(t) function:</p>
<p><img src="/assets/blt592536ac50554d85/Beziereq3.png" alt="beziereq3.png"></p>
<p>Sure enough we’re left with the formal quadratic Bézier curve equation!</p>
<pre><code class="language-lua">function quadBezier(t, p0, p1, p2)
	return (1 - t)^2 * p0 + 2 * (1 - t) * t * p1 + t^2 * p2
end
</code></pre>
<img src="/assets/blt8a1bc7e1b6272ca7/Bezier3.gif" style="width:600px;" />
<h2>Cubic Bézier curves</h2>
<p>A cubic Bézier curve is a curve that’s created with four points. The first and the fourth point define the start and the end of the curve. The intermediates point once again just like the quadratic curve influence the curvature of the line.</p>
<p>Here’s what a cubic Bézier might look like:</p>
<p><img src="/assets/blt6dbdfe4e78afd162/Bezier4.png" alt="bezier4.png"></p>
<p>Once again, this might seem a little confusing to wrap your head around but it’s a very similar process to what we were doing with the quadratic Bézier curves. What we’re actually doing is lerping along the line between between p0 and p1 while simultaneously lerping along the line between p1 and p2 while also simultaneously lerping along the line between p2 and p3. We’re then taking the two points created by those the first and second lerp functions and then lerping along that value to get yet another point which we’ll call “a”. Then we’re taking two points created by the second and third lerp functions and lerping along the line created by those two points to get a point which we’ll call “b”. Finally, we lerp between “a” and “b” to get our point along the curve.</p>
<p><img src="/assets/blt0e3d6247bf78730f/Bezier5.gif" alt="bezier5.gif"></p>
<p>We can write this in function form:</p>
<pre><code class="language-lua">function lerp(a, b, c)
	return a + (b - a) * c
end

function cubicBezier(t, p0, p1, p2, p3)
	local l1 = lerp(p0, p1, t)
	local l2 = lerp(p1, p2, t)
	local l3 = lerp(p2, p3, t)
	local a = lerp(l1, l2, t)
	local b = lerp(l2, l3, t)
	local cubic = lerp(a, b, t)
	return cubic
end
</code></pre>
<p>Yet again, there’s a more formal equation for a cubic Bézier:</p>
<p><img src="/assets/blt8edacc997ebcbbc2/Beziereq4.png" alt="beziereq4.png"></p>
<p>In a similar sense we can pull apart the code from above to find why this equation works:</p>
<p><img src="/assets/blt7d7cc1c551a785d0/Beziereq5.png" alt="beziereq5.png"></p>
<p>Sure enough, we’re left with the cubic Bézier function!</p>
<pre><code class="language-lua">function cubicBezier(t, p0, p1, p2, p3)
	return (1 - t)^3*p0 + 3*(1 - t)^2*t*p1 + 3*(1 - t)*t^2*p2 + t^3*p3
end
</code></pre>
<img src="/assets/blt39e5771948c7202b/Bezier6.gif" style="width:600px;" />
<p>It is possible to have Bézier curves of higher degrees by following a similar pattern but for the purpose of this article we’ll stop here at cubic.</p>
<h2>Arc-length parameterization</h2>
<p>So now that we know a bit about how to calculate points along Bézier curves let’s talk about some current issues we might face with them. To start, let’s see what happens when we try to interpolate along our curve at a fixed speed.</p>
<p><img src="/assets/blt36c3b5fb39d66d62/Bezier7.gif" alt="bezier7.gif"></p>
<pre><code class="language-lua">-- function for drawing a 2D line between two points
function drawLine(p1, p2)
	local v = (p2 - p1)
	local f = Instance.new(&quot;Frame&quot;)
	f.Size = UDim2.new(0, v.magnitude + 1, 0, 2)
	f.Position = UDim2.new(0,(p1.x + v.x/2) - f.Size.X.Offset * 0.5, 0, (p1.y + v.y/2) - f.Size.Y.Offset * 0.5)
	f.Rotation = math.deg(math.atan2(v.y, v.x))
	f.BorderSizePixel = 0
	f.BackgroundColor3 = Color3.new()
	return f
end

function update(p0, p1, p2, p3, canvas)
	local last
	canvas:ClearAllChildren() -- clear any previous drawings
	for t = 0, 1, 0.01 do -- 0 &lt;= t &lt;= 1
		local p = cubicBezier(t, p0, p1, p2, p3)
		if last then drawLine(last, p).Parent = canvas end
		last = p
	end
end

function travelCurve(p0, p1, p2, p3, moving)
	for t = 0, 1, 0.01 do -- 0 &lt;= t &lt;= 1
		local p = cubicBezier(t, p0, p1, p2, p3)
		moving.Position = UDim2.new(0, p.x - mp.AbsoluteSize.x/2, 0, p.y - mp.AbsoluteSize.y/2)
		game:GetService(&quot;RunService&quot;).RenderStepped:wait()
	end
end
</code></pre>
<p>Hmm, that doesn’t look like it’s traveling at a linear rate does it? Turns out the reason for this is because by nature of a Bézier curve doesn’t produce points that are evenly distributed. To see this let’s just draw points along the curve.</p>
<p><img src="/assets/bltcdd5fd2ce9185675/Bezier8.gif" alt="bezier8.gif"></p>
<pre><code class="language-lua">-- function for drawing a 2D point
function drawPoint(p1)
	local f = Instance.new(&quot;Frame&quot;)
	f.Size = UDim2.new(0, 2, 0, 2)
	f.Position = UDim2.new(0, p1.x - f.Size.X.Offset * 0.5, 0, p1.y - f.Size.Y.Offset * 0.5)
	f.BorderSizePixel = 0
	f.BackgroundColor3 = Color3.new()
	return f
end

function update(p0, p1, p2, p3, canvas)
	local last
	canvas:ClearAllChildren() -- clear any previous drawings
	for t = 0, 1, 0.01 do -- 0 &lt;= t &lt;= 1
		local p = cubicBezier(t, p0, p1, p2, p3)
		drawPoint(p).Parent = world
		last = p
	end
end
</code></pre>
<p>As shown in the gif above, the points near the middle are more tightly packed together and the points closer to the start and end of the curve are further apart. This creates an effect of slowing down in the middle and getting faster near the start and end. So what can we do to fix this problem? In other words, how can we make it so that t = 0.25 is guaranteed to be 25% along the curve’s distance?</p>
<p>Turns out the simplest way to do this is a best guess method which isn’t perfect, but it’s so close that unless you’re working for NASA you won’t even notice it. To be clear, there are other ways to do this that are more accurate, but they require calculus which is out of the scope of this article.</p>
<p>Here’s how the process works:</p>
<pre><code class="language-lua">-- n is the number of points
-- func is the bezier curve function
-- ... are the points used in the bezier curve function
function length(n, func, ...)
	local sum, ranges, sums = 0, {}, {}
	for i = 0, n-1 do
		-- calculate the current point and the next point
		local p1, p2 = func(i/n, ...), func((i+1)/n, ...)
		-- get the distance between them
		local dist = (p2 - p1).magnitude
		-- store the information we gathered in a table that's indexed by the current distance
		ranges[sum] = {dist, p1, p2}
		-- store the current sum so we can easily sort through it later
		table.insert(sums, sum)
		-- update the sum
		sum = sum + dist
	end
	-- return values
	return sum, ranges, sums
end
</code></pre>
<p>With that in mind we can use that function in tandem with another to get a pretty good guess of the actual linear position t would represent along the Bezier curve:</p>
<pre><code class="language-lua">function fixedBezier(n, t, func, ...)
	-- gather values from length function
	local length, ranges, sums = length(n, func, ...)
	-- find how far along the length we should be
	local T, near = t * length, 0
	-- get the nearest point we calculated
	for _, n in next, sums do
		if (T - n) &lt; 0 then break end
		near = n
	end
	local set = ranges[near]
	-- linearly interpolate between that point and its neighbor
	local percent = (T - near)/set[1]
	return set[2] + (set[3] - set[2]) * percent
end
</code></pre>
<p>Here’s the problem, when our current function is used consecutively this causes a lot of lag! We’re using the length function which has to do a ton of point calculations every time for just one single point! Here’s the good news though, if we use a bit of object oriented programming we can store the values the length function and make sure to update it only when the points that create the Bézier change!</p>
<p>Here’s a nice little Bézier module that should work with any degree of Bézier function:</p>
<p><img src="/assets/blt2ee53c6a18bb5ec1/Bezier9.gif" alt="bezier9.gif"></p>
<pre><code class="language-lua">local bezier = {}

function length(n, func, ...)
	local sum, ranges, sums = 0, {}, {}
	for i = 0, n-1 do
		local p1, p2 = func(i/n, ...), func((i+1)/n, ...)
		local dist = (p2 - p1).magnitude
		ranges[sum] = {dist, p1, p2}
		table.insert(sums, sum)
		sum = sum + dist
	end
	return sum, ranges, sums
end

function bezier.new(func, n, ...)
	local self = setmetatable({}, {__index = bezier})
	local sum, ranges, sums = length(n, func, ...)
	self.func = func
	self.n = n
	self.points = {...}
	self.length = sum
	self.ranges = ranges
	self.sums = sums
	return self
end

function bezier:setPoints(...)
	-- only update the length when the control points are changed
	local sum, ranges, sums = length(self.n, self.func, ...)
	self.points = {...}
	self.length = sum
	self.ranges = ranges
	self.sums = sums
end

function bezier:calc(t)
	-- if you don't need t to be a percentage of distance
	return self.func(t, unpack(self.points))
end

function bezier:calcFixed(t)
	local T, near = t * self.length, 0
	for _, n in next, self.sums do
		if (T - n) &lt; 0 then break end
		near = n
	end
	local set = self.ranges[near]
	local percent = (T - near)/set[1]
	return set[2], set[3], percent
end

return bezier
</code></pre>
<h2>Bézier paths</h2>
<p>The last thing this article will cover is the idea of connecting multiple Bézier curves together. For visual purposes the concept is easy. Just make sure that the start point of your next Bézier curve is the same as the last point on the previous Bézier curve. What becomes more difficult is making these curves into a single interpolation function. Luckily for us, it’s a similar process to Arc-length parameterization except we already have all the values we need!</p>
<p>For example let’s assume we’re using the module from above:</p>
<pre><code class="language-lua">-- bzs is table with bezier urves in it in order traveled
function travelPath(t, bzs)
	local totalLength, sums = 0, {}
	-- get total length of all curves, also order sums for sorting
	for _, bz in next, bzs do
		table.insert(sums, totalLength)
		totalLength = totalLength + bz.length
	end
	-- get percentage of total distance and find the bezier curve we're on
	local T, near, bz = t * totalLength, 0, bzs[1]
	for i, n in ipairs(sums) do
		if (T - n) &lt; 0 then break end
		near, bz = n, bzs[i]
	end
	-- get relative percentage traveled on given bezier curve
	local percent = (T - near)/bz.length
	-- lerp across curve by percentage
	local a, b, c = bz:calcFixed(percent)
	return a + (b - a) * c
end
</code></pre>
<p>That’s all there is to it! We can also use Bézier curves in 3D since lerping with 3D and 2D vectors is the same.</p>
<p><img src="/assets/blt1098a20ff5999294/Bezier10.gif" alt="bezier10.gif"></p>

      </div>
    
  



              
            </div>

            
            
            

          </div>
        </main>
      </div>
    </div>
    
  

  
  


<!-- Modal -->
<div class="modal gdpr-modal custom-modal" id="gdpr-modal" tabindex="-1" role="dialog" data-swiftype-index='false'>
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-body">
        <h1>此网站如何使用 Cookie</h1>
        <div class="privacy-content">
          <p>此平台使用 Cookie 为您提供更好的体验、对内容进行个性化、提供社交媒体功能和分析网站流量。如需详细信息（包括有关如何在此平台上防止使用 Cookie 或对其进行管理的信息），请参阅我们的<a href="https://en.help.roblox.com/hc/en-us/articles/115004630823-Roblox-Privacy-and-Cookie-Policy" target="_blank">隐私和 Cookie 政策</a>。</p>
        </div>
      </div>
      <div class="modal-footer">
        <a href="javascript:void(0)" class="btn" data-dismiss="modal">确定</a>
      </div>
    </div>
  </div>
</div>

  <!-- Modal -->
<div class="modal external-page-modal custom-modal" id="external-page-modal" tabindex="-1" role="dialog" data-swiftype-index=false>
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="modal-header-text">你即将离开 Roblox 网站</div>
        <p>请按下继续按钮前往： <span class="link"></span></p>
      </div>
      <div class="modal-footer">
        <a href="" class="btn secondary-btn" data-dismiss="modal">返回</a>
        <a href="" class="btn primary-btn continue-link" target="_blank">继续</a>
      </div>
    </div>
  </div>
</div>

  <footer class="footer no-print" data-swiftype-index='false'>
    <div class="footer-info">
      <div class="row">
        <div class="col-12 col-sm-12 col-md-6 col-xl-7">
          <div class="info">
            <a href="https://www.roblox.com" target="_self" class="footer-logo ptxl mbl">
              <img src="https://dk135eecbplh9.cloudfront.net/assets/blt045a822d589ff524/roblox.png" alt="Roblox" title="Roblox">
            </a>
            <p>© 2019 Roblox Corporation. 保留所有权利。</p>
            <p class="mtxl mbl">
              
            </p>
            <ul class="social-links pbxl">
              
                <li>
                  <a href="https://twitter.com/robloxdevrel" target="_blank" class="social-icon">
                    <img src="https://dk135eecbplh9.cloudfront.net/assets/blt9999b06df576d2a8/twitter.svg"/>
                  </a>
                </li>
              
                <li>
                  <a href="https://www.facebook.com/Roblox" target="_blank" class="social-icon">
                    <img src="https://dk135eecbplh9.cloudfront.net/assets/bltb204a8ba683501db/facebook.svg"/>
                  </a>
                </li>
              
                <li>
                  <a href="https://www.linkedin.com/company/roblox/" target="_blank" class="social-icon">
                    <img src="https://dk135eecbplh9.cloudfront.net/assets/blt17f9ce2758f959da/linkedin.svg"/>
                  </a>
                </li>
              
                <li>
                  <a href="https://www.instagram.com/Roblox/" target="_blank" class="social-icon">
                    <img src="https://dk135eecbplh9.cloudfront.net/assets/bltd4faf9ad9e4b5923/instagram.svg"/>
                  </a>
                </li>
              
                <li>
                  <a href="https://www.twitch.tv/roblox" target="_blank" class="social-icon">
                    <img src="https://dk135eecbplh9.cloudfront.net/assets/blt96661fab5f032a0f/twitch.svg"/>
                  </a>
                </li>
              
                <li>
                  <a href="https://www.youtube.com/channel/UCjiPEaapiHbJMoAdi_L8fNA" target="_blank" class="social-icon">
                    <img src="https://dk135eecbplh9.cloudfront.net/assets/blt7f204f65c7c3c1dd/youtube.svg"/>
                  </a>
                </li>
              
            </ul>

            

<div class="language-dropdown">
  <div class="input-group-btn" id="input-group-btn">
    <button type="button" class="input-dropdown-btn" data-toggle="dropdown" id="input-dropdown-btn">
      <span class="icon-globe" id="icon-globe"></span>
      <span class="rbx-selection-label" data-bind="label" id="rbx-selection-label">English</span>
      <span class="icon-down-16x16"></span>
    </button>
    <ul data-toggle="dropdown-menu" class="dropdown-menu" role="menu">
      
      <li><a class="locale-option" data-locale="en-us">English</a></li>
      
      <li><a class="locale-option" data-locale="zh-cn">中文(简体)</a></li>
      
    </ul>
  </div>
</div>


          </div>
        </div>
        
          
            <div class="col-6 col-sm-6 col-md-3 col-xl-2 company">
          
              <h5 data-toc-skip>公司</h5>
              <ul class="links-list">
                
                  <li>
                    <a href="https://corp.roblox.com/" target="_blank">关于 Roblox</a>
                  </li>
                
                  <li>
                    <a href="https://corp.roblox.com/careers/" target="_blank">招贤纳士</a>
                  </li>
                
                  <li>
                    <a href="https://corp.roblox.com/technology/" target="_self">技术</a>
                  </li>
                
                  <li>
                    <a href="https://en.help.roblox.com/hc/en-us/articles/115004647846-Roblox-Terms-of-Use" target="_self">服务条款</a>
                  </li>
                
                  <li>
                    <a href="https://en.help.roblox.com/hc/en-us/articles/115004630823-Roblox-Privacy-and-Cookie-Policy" target="_blank">隐私政策</a>
                  </li>
                
                  <li>
                    <a href="https://corp.roblox.com/parents/" target="_self">家长</a>
                  </li>
                
              </ul>
            </div>
        
          
            <div class="col-6 col-sm-6 col-md-3 col-xl-3 developers">
          
              <h5 data-toc-skip>开发人员</h5>
              <ul class="links-list">
                
                  <li>
                    <a href="/articles/Creating-Your-First-Game" target="_self">入门</a>
                  </li>
                
                  <li>
                    <a href="/learn-roblox/all-tutorials" target="_self">了解</a>
                  </li>
                
                  <li>
                    <a href="/api-reference" target="_self">API 参考</a>
                  </li>
                
                  <li>
                    <a href="https://devforum.roblox.com" target="_blank">社区</a>
                  </li>
                
                  <li>
                    <a href="https://devforum.roblox.com/c/public/public-updates-announcements" target="_self">开发人员公告</a>
                  </li>
                
              </ul>
            </div>
        
      </div>
    </div>
  </footer>




  </div>

    <div class="modal fade" id="live-search-modal" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header d-flex align-items-stretch">
                <label class="sr-only" for="st-live-search-input">搜索</label>
                <div class="input-group">
                    <div class="input-group-prepend">
                        <div class="input-group-text border-0 rounded-0"><i class="fa fa-search" aria-hidden="true"></i>
                        </div>
                    </div>
                    <input class="form-control border-0 rounded-0" name="q" type="search" id="st-live-search-input"
                        placeholder="搜索">
                </div>
                <button type="button" class="btn btn-primary ml-3" data-dismiss="modal" aria-label="Close">
                    <i class="fa fa-times" aria-hidden="true"></i>
                </button>
            </div>
            <div class="modal-body">
                <ul class="nav nav-tabs" id="live-search-result-tab" role="tablist">
                    <li class="nav-item">
                        <a class="nav-link active" id="all-results-tab" data-toggle="tab" href="#all" role="tab"
                            aria-selected="true" data-name="all_results">
                            所有结果
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="api-doc-results-tab" data-toggle="tab" href="#api-doc" role="tab"
                            aria-selected="false" data-name="api_reference">
                            API 文档
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="tutorial-results-tab" data-toggle="tab" href="#tutorial" role="tab"
                            aria-selected="false" data-name="articles">
                            教程
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="recipe-results-tab" data-toggle="tab" href="#recipe" role="tab"
                            aria-selected="false" data-name="recipes">
                            代码参考
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="video-results-tab" data-toggle="tab" href="#video" role="tab"
                            aria-selected="false" data-name="videos">
                            视频
                        </a>
                    </li>
                </ul>
                <div class="tab-content" id="live-search-result-tab-content">
                    <div class="search-container live-search-result mt-3"></div>
                </div>
            </div>
        </div>
    </div>
</div>

    <script>
      
    </script>
    <style>
      
    </style>
  </body>
</html>
